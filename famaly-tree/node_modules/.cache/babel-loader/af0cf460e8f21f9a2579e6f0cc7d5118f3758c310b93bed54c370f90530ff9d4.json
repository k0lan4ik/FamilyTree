{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\FamalyTree\\\\famaly-tree\\\\src\\\\pages\\\\Tree.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport * as go from \"gojs\";\nimport { ReactDiagram } from \"gojs-react\";\nimport { Context } from \"..\";\nimport { PERSONE_ROUTE, REACT_APP_API_URL } from \"../utils/consts\";\nimport { fetchPersonesForTree, createPersone, changeOnePersone, deletePersone } from \"../http/personeAPI\";\nimport { checkId } from \"../routes\";\nimport { Spinner } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Tree = () => {\n  _s();\n  const {\n    user\n  } = useContext(Context);\n  const [persones, setPersones] = useState();\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (loading) {\n      console.log(checkId());\n      fetchPersonesForTree(checkId()).then(data => {\n        console.log(data);\n        setPersones(data.rows);\n      }).finally(() => {\n        if (persones !== undefined && persones.length === 0 && checkId() === (Number.isInteger(user.user.id) ? user.user.id.toString() : \"0\")) {\n          createPersone({\n            firstname: \"Я\",\n            parent: 0,\n            user: user.user.id,\n            info: '[{\"title\": \"Дата рождения\", \"description\":\"\"},{\"title\": \"Страна\", \"description\":\"\"},{\"title\": \"Город\", \"description\":\"\"}]'\n          });\n        }\n        console.log(persones);\n        setLoading(false);\n      });\n    }\n  });\n  let branchs = [];\n\n  //let link = []\n  //const history = useNavigate;\n\n  const createBranches = persones => {\n    console.log(persones);\n    for (let i = 0; i < persones.length; i++) {\n      const persone = persones[i];\n      let color = \"#ccc\";\n      if (persone.gender === \"men\") {\n        color = \"#a1a7cc\";\n      } else if (persone.gender === \"women\") {\n        color = \"#cca1a1\";\n      }\n      branchs[i] = {\n        key: persone.id,\n        parent: persone.parent,\n        lastname: persone.lastname,\n        firstname: persone.firstname,\n        surname: persone.surname,\n        img: persone.img,\n        color: color\n      };\n      // link[i] = {\n      //  key: -(i + 1),\n      //  from: persone.id,\n      // to: persone.parent,\n      //};\n      //console.log(link[i]);\n    }\n  };\n\n  const textStyle = {\n    margin: new go.Margin(2, 10, 0, 0),\n    stroke: \"white\"\n  };\n  function initDiagram() {\n    const $ = go.GraphObject.make;\n    // set your license key here before creating the diagram: go.Diagram.licenseKey = \"...\";\n    const diagram = $(go.Diagram, {\n      \"undoManager.isEnabled\": true,\n      // must be set to allow for model change listening\n      layout: new go.TreeLayout({\n        angle: 90,\n        layerSpacing: 35\n      }),\n      // 'undoManager.maxHistoryLength': 0,  // uncomment disable undo/redo functionality\n      //\"clickCreatingTool.archetypeNodeData\": {\n      // firstname: \"new persone\",\n      // color: \"#a1a7cc\",\n      //},\n      model: new go.TreeModel({\n        linkKeyProperty: \"key\" // IMPORTANT! must be defined for merges and data sync when using GraphLinksModel\n      })\n    });\n\n    function findHeadShot(img) {\n      if (!img) {\n        console.log(\"i suck\");\n        return \"./1829050.png\";\n      } // There are only 16 images on the server\n      console.log(\"dont suck\");\n      return \"https://t4.ftcdn.net/jpg/00/65/77/27/360_F_65772719_A1UV5kLi5nCEWI0BNLLiFaBPEkUbv5Fv.jpg\";\n    }\n    // define a simple Node template\n    diagram.nodeTemplate = $(go.Node, \"Auto\",\n    // the Shape will go around the TextBlock\n    {\n      // here the second argument is this object, which is this Node\n      doubleClick: (e, node) => {\n        window.open(\"..\" + PERSONE_ROUTE + \"/\" + node.key);\n      }\n    }, new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify), $(go.Shape, \"RoundedRectangle\", {\n      name: \"SHAPE\",\n      fill: \"#ccc\",\n      strokeWidth: 0\n    }, new go.Binding(\"fill\", \"color\")), $(go.Panel, \"Horizontal\", $(go.Picture, {\n      source: REACT_APP_API_URL + \"undefined.jpg\",\n      margin: 10,\n      width: 50,\n      height: 50,\n      background: \"white\"\n    }, new go.Binding(\"sourse\", \"img\", findHeadShot)), $(go.Panel, \"Vertical\", $(go.TextBlock, textStyle,\n    // some room around the text\n    new go.Binding(\"text\", \"lastname\").makeTwoWay()), $(go.TextBlock, textStyle,\n    // some room around the text\n    new go.Binding(\"text\", \"firstname\").makeTwoWay()), $(go.TextBlock, textStyle,\n    // some room around the text\n    new go.Binding(\"text\", \"surname\").makeTwoWay()))));\n    if (checkId() === (Number.isInteger(user.user.id) ? user.user.id.toString() : \"0\")) {\n      diagram.nodeTemplate.contextMenu = $(\"ContextMenu\", $(\"ContextMenuButton\", $(go.TextBlock, \"Добавить Родственика\"), {\n        click: (e, button) => {\n          const node = button.part.adornedPart;\n          if (node !== null) {\n            const thisemp = node.data;\n            diagram.startTransaction(\"add employee\");\n            const newemp = {\n              firstname: \"Родственник\",\n              parent: thisemp.key\n            };\n            diagram.model.addNodeData(newemp);\n            const newnode = diagram.findNodeForData(newemp);\n            if (newnode) newnode.location = node.location;\n            createPersone({\n              firstname: newemp.firstname,\n              parent: newemp.parent,\n              user: user.user.id,\n              info: '[{\"title\": \"Дата рождения\", \"description\":\"\"},{\"title\": \"Страна\", \"description\":\"\"},{\"title\": \"Город\", \"description\":\"\"}]'\n            }).finally(() => diagram.commitTransaction(\"add employee\"));\n          }\n        }\n      }), $(\"ContextMenuButton\", $(go.TextBlock, \"Удалить Родственника\"), {\n        click: (e, button) => {\n          // reparent the subtree to this node's boss, then remove the node\n          const node = button.part.adornedPart;\n          if (node !== null) {\n            diagram.startTransaction(\"reparent remove\");\n            const chl = node.findTreeChildrenNodes();\n            // iterate through the children and set their parent key to our selected node's parent key\n            while (chl.next()) {\n              const emp = chl.value;\n              changeOnePersone(emp.data.key, {\n                parent: node.findTreeParentNode().data.key\n              });\n              diagram.model.setParentKeyForNodeData(emp.data, node.findTreeParentNode().data.key);\n            }\n            diagram.model.removeNodeData(node.data);\n            deletePersone(node.data.key).finally(() => diagram.commitTransaction(\"reparent remove\"));\n          }\n        }\n      }), $(\"ContextMenuButton\", $(go.TextBlock, \"Удалить Родственника и Цепь\"), {\n        click: (e, button) => {\n          // remove the whole subtree, including the node itsel\n          const node = button.part.adornedPart;\n          let ids = [node.data.key];\n          for (let i = 0; i < ids.length; i++) {\n            branchs.forEach(persone => {\n              if (persone.parent === ids[i] && persone.parent) {\n                ids.push(persone.key);\n              }\n            });\n          }\n          for (let i = 0; i < ids.length; i++) {\n            deletePersone(ids[i]);\n          }\n          if (node !== null) {\n            diagram.startTransaction(\"remove dept\");\n            diagram.removeParts(node.findTreeParts());\n            diagram.commitTransaction(\"remove dept\");\n          }\n        }\n      }));\n    }\n    diagram.linkTemplate = $(go.Link, {\n      routing: go.Link.Orthogonal,\n      corner: 5\n    }, new go.Shape({\n      strokeWidth: 3,\n      stroke: \"#ccc\"\n    }));\n    return diagram;\n  }\n\n  /**\r\n   * This function handles any changes to the GoJS model.\r\n   * It is here that you would make any updates to your React state, which is discussed belo.\r\n   */\n  function handleModelChange(changes) {\n    // console.log(changes);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"grow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0414\\u0435\\u0440\\u0435\\u0432\\u043E \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u0435\\u0442\\u0441\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this);\n  }\n  createBranches(persones);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(ReactDiagram, {\n      initDiagram: initDiagram,\n      divClassName: \"diagram-component\",\n      nodeDataArray: branchs,\n      onModelChange: handleModelChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 5\n  }, this);\n};\n_s(Tree, \"F0yJsMeXK1BJDnCMTw4g7P80ZzA=\");\n_c = Tree;\nexport default Tree;\nvar _c;\n$RefreshReg$(_c, \"Tree\");","map":{"version":3,"names":["React","useContext","useEffect","useState","go","ReactDiagram","Context","PERSONE_ROUTE","REACT_APP_API_URL","fetchPersonesForTree","createPersone","changeOnePersone","deletePersone","checkId","Spinner","jsxDEV","_jsxDEV","Tree","_s","user","persones","setPersones","loading","setLoading","console","log","then","data","rows","finally","undefined","length","Number","isInteger","id","toString","firstname","parent","info","branchs","createBranches","i","persone","color","gender","key","lastname","surname","img","textStyle","margin","Margin","stroke","initDiagram","$","GraphObject","make","diagram","Diagram","layout","TreeLayout","angle","layerSpacing","model","TreeModel","linkKeyProperty","findHeadShot","nodeTemplate","Node","doubleClick","e","node","window","open","Binding","Point","parse","makeTwoWay","stringify","Shape","name","fill","strokeWidth","Panel","Picture","source","width","height","background","TextBlock","contextMenu","click","button","part","adornedPart","thisemp","startTransaction","newemp","addNodeData","newnode","findNodeForData","location","commitTransaction","chl","findTreeChildrenNodes","next","emp","value","findTreeParentNode","setParentKeyForNodeData","removeNodeData","ids","forEach","push","removeParts","findTreeParts","linkTemplate","Link","routing","Orthogonal","corner","handleModelChange","changes","children","animation","fileName","_jsxFileName","lineNumber","columnNumber","divClassName","nodeDataArray","onModelChange","_c","$RefreshReg$"],"sources":["C:/Users/User/OneDrive/Рабочий стол/FamalyTree/famaly-tree/src/pages/Tree.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport * as go from \"gojs\";\r\nimport { ReactDiagram } from \"gojs-react\";\r\nimport { Context } from \"..\";\r\nimport { PERSONE_ROUTE, REACT_APP_API_URL } from \"../utils/consts\";\r\nimport {\r\n  fetchPersonesForTree,\r\n  createPersone,\r\n  changeOnePersone,\r\n  deletePersone,\r\n} from \"../http/personeAPI\";\r\nimport { checkId } from \"../routes\";\r\nimport { Spinner } from \"react-bootstrap\";\r\n\r\nconst Tree = () => {\r\n  const { user } = useContext(Context);\r\n  const [persones, setPersones] = useState();\r\n  const [loading, setLoading] = useState(true);\r\n  useEffect(() => {\r\n    if (loading) {\r\n      console.log(checkId());\r\n      fetchPersonesForTree(checkId())\r\n        .then((data) => {\r\n          console.log(data);\r\n          setPersones(data.rows);\r\n        })\r\n        .finally(() => {\r\n          if (\r\n            persones !== undefined &&\r\n            persones.length === 0 &&\r\n            checkId() ===\r\n              (Number.isInteger(user.user.id) ? user.user.id.toString() : \"0\")\r\n          ) {\r\n            createPersone({\r\n              firstname: \"Я\",\r\n              parent: 0,\r\n              user: user.user.id,\r\n              info: '[{\"title\": \"Дата рождения\", \"description\":\"\"},{\"title\": \"Страна\", \"description\":\"\"},{\"title\": \"Город\", \"description\":\"\"}]',\r\n            });\r\n          }\r\n          console.log(persones);\r\n\r\n          setLoading(false);\r\n        });\r\n    }\r\n  });\r\n\r\n  let branchs = [];\r\n\r\n  //let link = []\r\n  //const history = useNavigate;\r\n\r\n  const createBranches = (persones) => {\r\n    console.log(persones);\r\n    for (let i = 0; i < persones.length; i++) {\r\n      const persone = persones[i];\r\n      let color = \"#ccc\";\r\n      if (persone.gender === \"men\") {\r\n        color = \"#a1a7cc\";\r\n      } else if (persone.gender === \"women\") {\r\n        color = \"#cca1a1\";\r\n      }\r\n      branchs[i] = {\r\n        key: persone.id,\r\n        parent: persone.parent,\r\n        lastname: persone.lastname,\r\n        firstname: persone.firstname,\r\n        surname: persone.surname,\r\n        img: persone.img,\r\n        color: color,\r\n      };\r\n      // link[i] = {\r\n      //  key: -(i + 1),\r\n      //  from: persone.id,\r\n      // to: persone.parent,\r\n      //};\r\n      //console.log(link[i]);\r\n    }\r\n  };\r\n\r\n  const textStyle = { margin: new go.Margin(2, 10, 0, 0), stroke: \"white\" };\r\n\r\n  function initDiagram() {\r\n    const $ = go.GraphObject.make;\r\n    // set your license key here before creating the diagram: go.Diagram.licenseKey = \"...\";\r\n    const diagram = $(go.Diagram, {\r\n      \"undoManager.isEnabled\": true, // must be set to allow for model change listening\r\n      layout: new go.TreeLayout({ angle: 90, layerSpacing: 35 }), // 'undoManager.maxHistoryLength': 0,  // uncomment disable undo/redo functionality\r\n      //\"clickCreatingTool.archetypeNodeData\": {\r\n      // firstname: \"new persone\",\r\n      // color: \"#a1a7cc\",\r\n      //},\r\n      model: new go.TreeModel({\r\n        linkKeyProperty: \"key\", // IMPORTANT! must be defined for merges and data sync when using GraphLinksModel\r\n      }),\r\n    });\r\n\r\n    function findHeadShot(img) {\r\n      if (!img) {\r\n        console.log(\"i suck\");\r\n        return \"./1829050.png\";\r\n      } // There are only 16 images on the server\r\n      console.log(\"dont suck\");\r\n      return \"https://t4.ftcdn.net/jpg/00/65/77/27/360_F_65772719_A1UV5kLi5nCEWI0BNLLiFaBPEkUbv5Fv.jpg\";\r\n    }\r\n    // define a simple Node template\r\n    diagram.nodeTemplate = $(\r\n      go.Node,\r\n      \"Auto\", // the Shape will go around the TextBlock\r\n      {\r\n        // here the second argument is this object, which is this Node\r\n        doubleClick: (e, node) => {\r\n          window.open(\"..\" + PERSONE_ROUTE + \"/\" + node.key);\r\n        },\r\n      },\r\n      new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(\r\n        go.Point.stringify\r\n      ),\r\n      $(\r\n        go.Shape,\r\n        \"RoundedRectangle\",\r\n        {\r\n          name: \"SHAPE\",\r\n          fill: \"#ccc\",\r\n          strokeWidth: 0,\r\n        },\r\n        new go.Binding(\"fill\", \"color\")\r\n      ),\r\n      $(\r\n        go.Panel,\r\n        \"Horizontal\",\r\n        $(\r\n          go.Picture,\r\n          {\r\n            source: REACT_APP_API_URL + \"undefined.jpg\",\r\n            margin: 10,\r\n            width: 50,\r\n            height: 50,\r\n            background: \"white\",\r\n          },\r\n          new go.Binding(\"sourse\", \"img\", findHeadShot)\r\n        ),\r\n        $(\r\n          go.Panel,\r\n          \"Vertical\",\r\n          $(\r\n            go.TextBlock,\r\n            textStyle, // some room around the text\r\n            new go.Binding(\"text\", \"lastname\").makeTwoWay()\r\n          ),\r\n          $(\r\n            go.TextBlock,\r\n            textStyle, // some room around the text\r\n            new go.Binding(\"text\", \"firstname\").makeTwoWay()\r\n          ),\r\n          $(\r\n            go.TextBlock,\r\n            textStyle, // some room around the text\r\n            new go.Binding(\"text\", \"surname\").makeTwoWay()\r\n          )\r\n        )\r\n      )\r\n    );\r\n\r\n    if (\r\n      checkId() ===\r\n      (Number.isInteger(user.user.id) ? user.user.id.toString() : \"0\")\r\n    ) {\r\n      diagram.nodeTemplate.contextMenu = $(\r\n        \"ContextMenu\",\r\n        $(\"ContextMenuButton\", $(go.TextBlock, \"Добавить Родственика\"), {\r\n          click: (e, button) => {\r\n            const node = button.part.adornedPart;\r\n            if (node !== null) {\r\n              const thisemp = node.data;\r\n              diagram.startTransaction(\"add employee\");\r\n              const newemp = {\r\n                firstname: \"Родственник\",\r\n                parent: thisemp.key,\r\n              };\r\n              diagram.model.addNodeData(newemp);\r\n              const newnode = diagram.findNodeForData(newemp);\r\n              if (newnode) newnode.location = node.location;\r\n              createPersone({\r\n                firstname: newemp.firstname,\r\n                parent: newemp.parent,\r\n                user: user.user.id,\r\n                info: '[{\"title\": \"Дата рождения\", \"description\":\"\"},{\"title\": \"Страна\", \"description\":\"\"},{\"title\": \"Город\", \"description\":\"\"}]',\r\n              }).finally(() => diagram.commitTransaction(\"add employee\"));\r\n            }\r\n          },\r\n        }),\r\n        $(\"ContextMenuButton\", $(go.TextBlock, \"Удалить Родственника\"), {\r\n          click: (e, button) => {\r\n            // reparent the subtree to this node's boss, then remove the node\r\n            const node = button.part.adornedPart;\r\n            if (node !== null) {\r\n              diagram.startTransaction(\"reparent remove\");\r\n              const chl = node.findTreeChildrenNodes();\r\n              // iterate through the children and set their parent key to our selected node's parent key\r\n              while (chl.next()) {\r\n                const emp = chl.value;\r\n\r\n                changeOnePersone(emp.data.key, {\r\n                  parent: node.findTreeParentNode().data.key,\r\n                });\r\n                diagram.model.setParentKeyForNodeData(\r\n                  emp.data,\r\n                  node.findTreeParentNode().data.key\r\n                );\r\n              }\r\n\r\n              diagram.model.removeNodeData(node.data);\r\n\r\n              deletePersone(node.data.key).finally(() =>\r\n                diagram.commitTransaction(\"reparent remove\")\r\n              );\r\n            }\r\n          },\r\n        }),\r\n        $(\"ContextMenuButton\", $(go.TextBlock, \"Удалить Родственника и Цепь\"), {\r\n          click: (e, button) => {\r\n            // remove the whole subtree, including the node itsel\r\n            const node = button.part.adornedPart;\r\n            let ids = [node.data.key];\r\n            for (let i = 0; i < ids.length; i++) {\r\n              branchs.forEach((persone) => {\r\n                if (persone.parent === ids[i] && persone.parent) {\r\n                  ids.push(persone.key);\r\n                }\r\n              });\r\n            }\r\n            for (let i = 0; i < ids.length; i++) {\r\n              deletePersone(ids[i]);\r\n            }\r\n            if (node !== null) {\r\n              diagram.startTransaction(\"remove dept\");\r\n              diagram.removeParts(node.findTreeParts());\r\n              diagram.commitTransaction(\"remove dept\");\r\n            }\r\n          },\r\n        })\r\n      );\r\n    }\r\n\r\n    diagram.linkTemplate = $(\r\n      go.Link,\r\n      { routing: go.Link.Orthogonal, corner: 5 },\r\n      new go.Shape({ strokeWidth: 3, stroke: \"#ccc\" })\r\n    );\r\n\r\n    return diagram;\r\n  }\r\n\r\n  /**\r\n   * This function handles any changes to the GoJS model.\r\n   * It is here that you would make any updates to your React state, which is discussed belo.\r\n   */\r\n  function handleModelChange(changes) {\r\n    // console.log(changes);\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div>\r\n        <Spinner animation={\"grow\"} />\r\n        <h2>Дерево загружается</h2>\r\n      </div>\r\n    );\r\n  }\r\n  createBranches(persones);\r\n  return (\r\n    <div>\r\n      <ReactDiagram\r\n        initDiagram={initDiagram}\r\n        divClassName=\"diagram-component\"\r\n        nodeDataArray={branchs}\r\n        onModelChange={handleModelChange}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tree;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}